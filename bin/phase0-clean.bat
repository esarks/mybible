@echo off
REM ========================================================================
REM Phase 0: Clean Build Directories
REM Removes all generated artifacts for a clean build
REM ========================================================================

echo ========================================================================
echo Phase 0: Clean Build Directories
echo ========================================================================

REM Clean data layer classes
if exist "%MYBIBLE_CLASSES%\data" (
    echo Cleaning data layer: %MYBIBLE_CLASSES%\data
    rmdir /q /s "%MYBIBLE_CLASSES%\data"
)
mkdir "%MYBIBLE_CLASSES%\data"

REM Clean server layer classes
if exist "%MYBIBLE_CLASSES%\server" (
    echo Cleaning server layer: %MYBIBLE_CLASSES%\server
    rmdir /q /s "%MYBIBLE_CLASSES%\server"
)
mkdir "%MYBIBLE_CLASSES%\server"

REM Clean util layer classes
if exist "%MYBIBLE_CLASSES%\util" (
    echo Cleaning util layer: %MYBIBLE_CLASSES%\util
    rmdir /q /s "%MYBIBLE_CLASSES%\util"
)
mkdir "%MYBIBLE_CLASSES%\util"

REM Clean old ACTIVITY_LEDGER files from data source directory (not used in MyBible)
echo Cleaning old ACTIVITY_LEDGER files from source...
if exist "%MYBIBLE_HOME%\data\ACTIVITY_LEDGER.new" del "%MYBIBLE_HOME%\data\ACTIVITY_LEDGER.new"
if exist "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud.new" del "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud.new"
if exist "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud_Crud.new" del "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud_Crud.new"
if exist "%MYBIBLE_HOME%\data\ACTIVITY_LEDGER.script" del "%MYBIBLE_HOME%\data\ACTIVITY_LEDGER.script"
if exist "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud.script" del "%MYBIBLE_HOME%\data\ACTIVITY_LEDGERCrud.script"

REM Clean jacBuild24 classes for mybible (generated by jac.bat)
set JAC_MYBIBLE_CLASSES=C:\Users\ptm\OneDrive\Documents\GitHub\ArchitectsCompanion\jac2024\jacBuild24\classes\com\mybible
if exist "%JAC_MYBIBLE_CLASSES%" (
    echo Cleaning JAC build classes: %JAC_MYBIBLE_CLASSES%
    rmdir /q /s "%JAC_MYBIBLE_CLASSES%"
)

echo.
echo Phase 0 Complete: All directories cleaned and recreated
echo ========================================================================
